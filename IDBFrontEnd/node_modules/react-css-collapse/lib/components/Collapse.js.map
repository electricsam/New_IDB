{"version":3,"sources":["../../src/components/Collapse.jsx"],"names":["initialStyle","willChange","height","overflow","Collapse","onTransitionEnd","bind","setExpanded","setCollapsed","content","props","isOpen","nextProps","setContentStyleProperty","scrollHeight","requestAnimationFrame","setTimeout","e","onRest","target","propertyName","property","value","style","el","className","children","defaultProps","propTypes","node","bool","string","func"],"mappings":";;;;;;;;AAAA;;;;AACA;;;;AACA;;;;;;;;;;;;AAEA,IAAMA,eAAe;AACnBC,cAAY,QADO;AAEnBC,UAAQ,KAFW;AAGnBC,YAAU;AAHS,CAArB;;IAMMC,Q;;;AACJ,sBAAc;AAAA;;AAAA;;AAEZ,UAAKC,eAAL,GAAuB,MAAKA,eAAL,CAAqBC,IAArB,OAAvB;AACA,UAAKC,WAAL,GAAmB,MAAKA,WAAL,CAAiBD,IAAjB,OAAnB;AACA,UAAKE,YAAL,GAAoB,MAAKA,YAAL,CAAkBF,IAAlB,OAApB;AAJY;AAKb;;;;wCAEmB;AAClB,UAAI,KAAKG,OAAL,IAAgB,KAAKC,KAAL,CAAWC,MAA/B,EAAuC;AACrC,aAAKJ,WAAL;AACD;AACF;;;8CAEyBK,S,EAAW;AAAA;;AACnC,UAAI,CAAC,KAAKH,OAAV,EAAmB;AACjB;AACD;;AAED;AACA,UAAI,CAAC,KAAKC,KAAL,CAAWC,MAAZ,IAAsBC,UAAUD,MAApC,EAA4C;AAC1C;AACA,aAAKE,uBAAL,CAA6B,QAA7B,EAA0C,KAAKJ,OAAL,CAAaK,YAAvD;AACD;;AAED;AACA,UAAI,KAAKJ,KAAL,CAAWC,MAAX,IAAqB,CAACC,UAAUD,MAApC,EAA4C;AAC1C;AACA;AACA,aAAKE,uBAAL,CAA6B,QAA7B,EAA0C,KAAKJ,OAAL,CAAaK,YAAvD;AACA,uBAAKC,qBAAL,CAA2B,YAAM;AAC/B;AACA;AACAC,qBAAW,YAAM;AACf,mBAAKR,YAAL;AACD,WAFD,EAEG,CAFH;AAGD,SAND;AAOD;AACF;;;oCAEeS,C,EAAG;AAAA,mBACU,KAAKP,KADf;AAAA,UACTQ,MADS,UACTA,MADS;AAAA,UACDP,MADC,UACDA,MADC;;;AAGjB,UAAIA,MAAJ,EAAY;AACV,aAAKJ,WAAL;AACD;;AAED,UAAIW,UAAUD,EAAEE,MAAF,KAAa,KAAKV,OAA5B,IAAuCQ,EAAEG,YAAF,KAAmB,QAA9D,EAAwE;AACtEF;AACD;AACF;;;4CAEuBG,Q,EAAUC,K,EAAO;AACvC,WAAKb,OAAL,CAAac,KAAb,CAAmBF,QAAnB,IAA+BC,KAA/B;AACD;;;mCAEc;AACb,WAAKT,uBAAL,CAA6B,QAA7B,EAAuC,KAAvC;AACA,WAAKA,uBAAL,CAA6B,UAA7B,EAAyC,QAAzC;AACD;;;kCAEa;AACZ,WAAKA,uBAAL,CAA6B,QAA7B,EAAuC,MAAvC;AACA,WAAKA,uBAAL,CAA6B,UAA7B,EAAyC,SAAzC;AACD;;;6BAEQ;AAAA;;AACP,aACE;AAAA;AAAA;AACE,eAAK,aAACW,EAAD,EAAQ;AACX,mBAAKf,OAAL,GAAee,EAAf;AACD,WAHH;AAIE,iBAAOxB,YAJT;AAKE,qBAAW,KAAKU,KAAL,CAAWe,SALxB;AAME,2BAAiB,KAAKpB;AANxB;AAQG,aAAKK,KAAL,CAAWgB,QAAX,IAAuB,KAAKhB,KAAL,CAAWgB;AARrC,OADF;AAYD;;;;;;AAGHtB,SAASuB,YAAT,GAAwB;AACtBhB,UAAQ,KADc;AAEtBc,aAAW,IAFW;AAGtBC,YAAU,IAHY;AAItBR,UAAQ;AAJc,CAAxB;;AAOAd,SAASwB,SAAT,GAAqB;AACnBF,YAAU,oBAAUG,IADD;AAEnBlB,UAAQ,oBAAUmB,IAFC;AAGnBL,aAAW,oBAAUM,MAHF;AAInBb,UAAQ,oBAAUc;AAJC,CAArB;;kBAOe5B,Q","file":"Collapse.js","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport util from '../util';\n\nconst initialStyle = {\n  willChange: 'height',\n  height: '0px',\n  overflow: 'hidden',\n};\n\nclass Collapse extends Component {\n  constructor() {\n    super();\n    this.onTransitionEnd = this.onTransitionEnd.bind(this);\n    this.setExpanded = this.setExpanded.bind(this);\n    this.setCollapsed = this.setCollapsed.bind(this);\n  }\n\n  componentDidMount() {\n    if (this.content && this.props.isOpen) {\n      this.setExpanded();\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (!this.content) {\n      return;\n    }\n\n    // expand\n    if (!this.props.isOpen && nextProps.isOpen) {\n      // have the element transition to the height of its inner content\n      this.setContentStyleProperty('height', `${this.content.scrollHeight}px`);\n    }\n\n    // collapse\n    if (this.props.isOpen && !nextProps.isOpen) {\n      // explicitly set the element's height to its current pixel height, so we\n      // aren't transitioning out of 'auto'\n      this.setContentStyleProperty('height', `${this.content.scrollHeight}px`);\n      util.requestAnimationFrame(() => {\n        // \"pausing\" the JavaScript execution to let the rendering threads catch up\n        // http://stackoverflow.com/questions/779379/why-is-settimeoutfn-0-sometimes-useful\n        setTimeout(() => {\n          this.setCollapsed();\n        }, 0);\n      });\n    }\n  }\n\n  onTransitionEnd(e) {\n    const { onRest, isOpen } = this.props;\n\n    if (isOpen) {\n      this.setExpanded();\n    }\n\n    if (onRest && e.target === this.content && e.propertyName === 'height') {\n      onRest();\n    }\n  }\n\n  setContentStyleProperty(property, value) {\n    this.content.style[property] = value;\n  }\n\n  setCollapsed() {\n    this.setContentStyleProperty('height', '0px');\n    this.setContentStyleProperty('overflow', 'hidden');\n  }\n\n  setExpanded() {\n    this.setContentStyleProperty('height', 'auto');\n    this.setContentStyleProperty('overflow', 'visible');\n  }\n\n  render() {\n    return (\n      <div\n        ref={(el) => {\n          this.content = el;\n        }}\n        style={initialStyle}\n        className={this.props.className}\n        onTransitionEnd={this.onTransitionEnd}\n      >\n        {this.props.children && this.props.children}\n      </div>\n    );\n  }\n}\n\nCollapse.defaultProps = {\n  isOpen: false,\n  className: null,\n  children: null,\n  onRest: null,\n};\n\nCollapse.propTypes = {\n  children: PropTypes.node,\n  isOpen: PropTypes.bool,\n  className: PropTypes.string,\n  onRest: PropTypes.func,\n};\n\nexport default Collapse;\n"]}